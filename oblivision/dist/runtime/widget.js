System.register(["esri/geometry/projection","jimu-arcgis","jimu-core","jimu-core/react","jimu-ui"],(function(e,t){var r={},o={},s={},n={},i={};return{setters:[function(e){r.default=e.default},function(e){o.JimuMapViewComponent=e.JimuMapViewComponent},function(e){s.React=e.React,s.classNames=e.classNames,s.getAppStore=e.getAppStore},function(e){n.useEffect=e.useEffect,n.useRef=e.useRef,n.useState=e.useState},function(e){i.Button=e.Button}],execute:function(){e((()=>{var e={791:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2 2.707v1.45a.5.5 0 0 1-1 0V1h3.05a.5.5 0 1 1 0 1H2.707L8 7.29 13.293 2H11.95a.5.5 0 1 1 0-1H15v3.156a.5.5 0 0 1-1 0v-1.45L8.707 7.999l5.29 5.289v-1.55a.5.5 0 1 1 1 0V15H11.84a.5.5 0 1 1 0-1h1.456L8 8.705 2.704 14h1.453a.5.5 0 1 1 0 1H1v-3.263a.5.5 0 0 1 1 0v1.553l5.293-5.292L2 2.707Z" clip-rule="evenodd"></path></svg>'},900:e=>{"use strict";e.exports=r},826:e=>{"use strict";e.exports=o},891:e=>{"use strict";e.exports=s},315:e=>{"use strict";e.exports=n},726:e=>{"use strict";e.exports=i}},t={};function a(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,a),s.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="";var u={};return a.p=window.jimuConfig.baseUrl,(()=>{"use strict";a.r(u),a.d(u,{__set_webpack_public_path__:()=>m,default:()=>d});var e=a(900),t=a(826),r=a(891),o=a(315),s=a(726);function n(e){return null!=e&&"function"==typeof e[Symbol.iterator]}class i{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach((t=>{e+=t.length})),e}add(e,t){if(n(e)){const r=this._getOrCreateGroup(t);for(const t of e)this._isHandle(t)&&r.push(t)}else this._isHandle(e)&&this._getOrCreateGroup(t).push(e);return this}forEach(e,t){if("function"==typeof e)this._groups.forEach((t=>t.forEach(e)));else{const r=this._getGroup(e);r&&t&&r.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if("string"!=typeof e&&n(e)){for(const t of e)this.remove(t);return this}return this.has(e)?(this._removeAllFromGroup(this._getGroup(e)),this._groups.delete(this._ensureGroupKey(e)),this):this}removeAll(){return this._groups.forEach((e=>this._removeAllFromGroup(e))),this._groups.clear(),this}_isHandle(e){return e&&(!!e.remove||e instanceof i)}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}_removeAllFromGroup(e){for(const t of e)t instanceof i?t.removeAll():t.remove()}}var c=a(791),l=a.n(c);const p=e=>{const t=window.SVG,{className:o}=e,s=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(r[o[s]]=e[o[s]])}return r}(e,["className"]),n=(0,r.classNames)("jimu-icon jimu-icon-component",o);return t?r.React.createElement(t,Object.assign({className:n,src:l()},s)):r.React.createElement("svg",Object.assign({className:n},s))};var f=function(e,t,r,o){return new(r||(r=Promise))((function(s,n){function i(e){try{u(o.next(e))}catch(e){n(e)}}function a(e){try{u(o.throw(e))}catch(e){n(e)}}function u(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}u((o=o.apply(e,t||[])).next())}))};const d=n=>{var a;const[u,c]=(0,o.useState)(null),[l,d]=(0,o.useState)(""),[m,h]=(0,o.useState)(""),[v,g]=(0,o.useState)(0),[y,w]=(0,o.useState)(0),[_,b]=(0,o.useState)(!1),x=(0,o.useRef)(new i),S="https://www.sol-israel.co.il/oblivisionJS/index.aspx";return(0,o.useEffect)((()=>{u&&(_?(console.log("ðŸš€ ~ file: widget.tsx:39 ~ useEffect ~ active:",_),u.view.container.style.cursor="crosshair",x.current.add(u.view.on("click",(t=>f(void 0,void 0,void 0,(function*(){const r=u.view.toMap({x:t.x,y:t.y}),o=yield(s=r,f(void 0,void 0,void 0,(function*(){return yield e.default.load(),e.default.project(s,{wkid:2039})})));var s;d(r.latitude.toFixed(3)),h(r.longitude.toFixed(3)),w(Math.round(1*u.view.scale)/1),g(u.view.zoom);const n={x:o.x,y:o.y,z:o.z,project:"ofakim"},i=new URLSearchParams(n).toString();window.open(`${S}?${i}`,"_blank"),console.log("ðŸš€ ~ file: widget.tsx:62 ~ jmv.view.on ~ ${url}?${params}:",`${S}?${i}`),b(!1)})))))):(u.view.container.style.cursor="default",x.current.destroy()))}),[_]),(0,o.useEffect)((()=>{const{lon:e,lat:t,level:o}=(0,r.getAppStore)().getState().queryObject;u&&u.view.goTo({center:[Number(e),Number(t)],zoom:o}).catch((e=>{"AbortError"!=e.name&&console.error(e)}))}),[u]),r.React.createElement("div",{className:"widget-demo jimu-widget m-2"},n.hasOwnProperty("useMapWidgetIds")&&n.useMapWidgetIds&&1===n.useMapWidgetIds.length&&r.React.createElement(t.JimuMapViewComponent,{useMapWidgetId:null===(a=n.useMapWidgetIds)||void 0===a?void 0:a[0],onActiveViewChange:e=>{e&&c(e)}}),r.React.createElement(s.Button,{id:"my","aria-label":"Button",icon:!0,onClick:e=>{b(!_)},size:"default",type:_?"primary":"default"},r.React.createElement(p,null)))};function m(e){a.p=e}})(),u})())}}}));